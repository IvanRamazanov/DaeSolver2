<elem description="Synchronous motor without damper winding" view="SynchronousMachine.png" name="Synchronous machine">
    <Connections>
        <pin domain="elec" name="fd1" x=9 y=63>
            <init name="CurrentR" title="Rotor current" var="fd1.f">0</init>
        </pin>
        <pin domain="elec" name="fd2" x=40 y=63></pin>
        <pin domain="elec_3ph" name="L" x=25 y=4>
            <init name="CurrentA" title="Stator current, ph. A" var="L.f[1]">0</init>
            <init name="CurrentB" title="Stator current, ph. B" var="L.f[2]">0</init>
        </pin>
        <pin domain="rot" name="r1" x=45 y=35></pin>
        <pin domain="rot" name="r2" x=4 y=35></pin>
    </Connections>
    <Parameters>
        <parm name="Lls" type=2 title="Stator leakage inductanse">1.273e-5</parm>
        <parm name="Llf" type=2 title="rotor leakage inductance">8.703e-5</parm>
        <parm name="Lmd" type=2 title="d-axis mutual inductance">0.0005246</parm>
        <parm name="Lmq" type=2 title="q-axis mutual inductance">0.0003845</parm>
        <parm name="Rf" type=2 title="excitation winding resistance">0.0001576</parm>
        <parm name="Rs" type=2 title="Stator resistance">0.00076</parm>
        <parm name="J" type=2 title="Inertia">49.81</parm>
        <parm name="Pp" type=2 title="pole pairs">2</parm>
        <parm name="F" type=2 title="Friction">0.8</parm>
    </Parameters>
    <Workspace>
        <var name="X" type=1>
            <init name="speed" title="Speed">0</init>
        </var>
        <var name="theta" type=1>
            <init name="theta" title="Rotor angle">0</init>
        </var>
    </Workspace>
    <InternalFlow>
        <sum>fd1;fd2</sum>
        <sum>L</sum>
        <sum>r1;r2</sum>
    </InternalFlow>
    <Equations>
        <var name="M">(3*Pp*(((Lls+Lmd)*((2*L.f[1]*cos(theta))/3+(2*L.f[2]*cos((2*pi)/3-theta))/3-(2*cos((2*pi)/3+theta)*(L.f[1]+L.f[2]))/3)+fd1.f*Lmd)*((2*L.f[2]*sin((2*pi)/3-theta))/3-(2*L.f[1]*sin(theta))/3+(2*sin((2*pi)/3+theta)*(L.f[1]+L.f[2]))/3)-(Lls+Lmq)*((2*L.f[1]*cos(theta))/3+(2*L.f[2]*cos((2*pi)/3-theta))/3-(2*cos((2*pi)/3+theta)*(L.f[1]+L.f[2]))/3)*((2*L.f[2]*sin((2*pi)/3-theta))/3-(2*L.f[1]*sin(theta))/3+(2*sin((2*pi)/3+theta)*(L.f[1]+L.f[2]))/3)))/2</var>
        <equ>X = r1.p - r2.p</equ>
        <equ>d.L.f[1] = -(2*Llf*Lls*p.4-2*Llf*Lmd*p.3-2*Llf*Lmq*p.3-4*Lls*Lmd*p.3-4*Llf*Lls*p.3+Llf*Lmd*p.4-2*Lmd*Lmq*p.3+Llf*Lmq*p.4+2*Lls*Lmd*p.4+2*Llf*Lls*p.5+Llf*Lmd*p.5+Lmd*Lmq*p.4+Llf*Lmq*p.5+2*Lls*Lmd*p.5+Lmd*Lmq*p.5+6*L.f[1]*Llf*Lls*Rs+3*L.f[1]*Llf*Lmd*Rs+3*L.f[1]*Llf*Lmq*Rs+6*L.f[1]*Lls*Lmd*Rs+3*L.f[1]*Lmd*Lmq*Rs+2*Llf*Lmd*p.3*cos(2*theta)-2*Llf*Lmq*p.3*cos(2*theta)-Llf*Lmd*p.4*cos(2*theta)-2*Lmd*Lmq*p.3*cos(2*theta)+Llf*Lmq*p.4*cos(2*theta)-Llf*Lmd*p.5*cos(2*theta)+Lmd*Lmq*p.4*cos(2*theta)+Llf*Lmq*p.5*cos(2*theta)+Lmd*Lmq*p.5*cos(2*theta)+6*Lls*Lmd*p.1*cos(theta)-6*Lls*Lmd*p.2*cos(theta)+6*Lmd*Lmq*p.1*cos(theta)-6*Lmd*Lmq*p.2*cos(theta)+pow(3,0.5)*Llf*Lmd*p.4*sin(2*theta)-pow(3,0.5)*Llf*Lmq*p.4*sin(2*theta)-pow(3,0.5)*Llf*Lmd*p.5*sin(2*theta)-pow(3,0.5)*Lmd*Lmq*p.4*sin(2*theta)+pow(3,0.5)*Llf*Lmq*p.5*sin(2*theta)+pow(3,0.5)*Lmd*Lmq*p.5*sin(2*theta)-2*pow(3,0.5)*L.f[1]*Llf*Lls^2*X-pow(3,0.5)*L.f[1]*Llf*Lmd^2*X-pow(3,0.5)*L.f[1]*Llf*Lmq^2*X-pow(3,0.5)*L.f[1]*Lls*Lmd^2*X-2*pow(3,0.5)*L.f[1]*Lls^2*Lmd*X-4*pow(3,0.5)*L.f[2]*Llf*Lls^2*X-2*pow(3,0.5)*L.f[2]*Llf*Lmd^2*X-pow(3,0.5)*L.f[1]*Lmd*Lmq^2*X-2*pow(3,0.5)*L.f[2]*Llf*Lmq^2*X-2*pow(3,0.5)*L.f[2]*Lls*Lmd^2*X-4*pow(3,0.5)*L.f[2]*Lls^2*Lmd*X-2*pow(3,0.5)*L.f[2]*Lmd*Lmq^2*X-3*L.f[1]*Llf*Lmd^2*X*sin(2*theta)+3*L.f[1]*Llf*Lmq^2*X*sin(2*theta)-3*L.f[1]*Lls*Lmd^2*X*sin(2*theta)+3*L.f[1]*Lmd*Lmq^2*X*sin(2*theta)-6*fd1.f*Llf*Lmd^2*X*sin(theta)-6*fd1.f*Lls*Lmd^2*X*sin(theta)-6*fd1.f*Lls*Lmd*Rf*cos(theta)-6*fd1.f*Lmd*Lmq*Rf*cos(theta)-3*L.f[1]*Llf*Lmd*Rs*cos(2*theta)+3*L.f[1]*Llf*Lmq*Rs*cos(2*theta)+3*L.f[1]*Lmd*Lmq*Rs*cos(2*theta)-2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmd*X-2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmq*X-4*pow(3,0.5)*L.f[2]*Llf*Lls*Lmd*X-2*pow(3,0.5)*L.f[1]*Lls*Lmd*Lmq*X-4*pow(3,0.5)*L.f[2]*Llf*Lls*Lmq*X-4*pow(3,0.5)*L.f[2]*Lls*Lmd*Lmq*X-pow(3,0.5)*L.f[1]*Llf*Lmd*Rs*sin(2*theta)+pow(3,0.5)*L.f[1]*Llf*Lmq*Rs*sin(2*theta)-2*pow(3,0.5)*L.f[2]*Llf*Lmd*Rs*sin(2*theta)+pow(3,0.5)*L.f[1]*Lmd*Lmq*Rs*sin(2*theta)+2*pow(3,0.5)*L.f[2]*Llf*Lmq*Rs*sin(2*theta)+2*pow(3,0.5)*L.f[2]*Lmd*Lmq*Rs*sin(2*theta)-6*L.f[1]*Llf*Lls*Lmd*X*sin(2*theta)+6*L.f[1]*Llf*Lls*Lmq*X*sin(2*theta)+6*L.f[1]*Lls*Lmd*Lmq*X*sin(2*theta)-6*fd1.f*Llf*Lls*Lmd*X*sin(theta)+2*pow(3,0.5)*L.f[1]*Llf*Lls^2*Pp*X+2*pow(3,0.5)*L.f[1]*Lls^2*Lmd*Pp*X+4*pow(3,0.5)*L.f[2]*Llf*Lls^2*Pp*X+4*pow(3,0.5)*L.f[2]*Lls^2*Lmd*Pp*X+pow(3,0.5)*L.f[1]*Llf*Lmd^2*X*cos(2*theta)-pow(3,0.5)*L.f[1]*Llf*Lmq^2*X*cos(2*theta)+pow(3,0.5)*L.f[1]*Lls*Lmd^2*X*cos(2*theta)+2*pow(3,0.5)*L.f[2]*Llf*Lmd^2*X*cos(2*theta)-pow(3,0.5)*L.f[1]*Lmd*Lmq^2*X*cos(2*theta)-2*pow(3,0.5)*L.f[2]*Llf*Lmq^2*X*cos(2*theta)+2*pow(3,0.5)*L.f[2]*Lls*Lmd^2*X*cos(2*theta)-2*pow(3,0.5)*L.f[2]*Lmd*Lmq^2*X*cos(2*theta)+2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmd*Pp*X+2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmq*Pp*X+2*pow(3,0.5)*L.f[1]*Llf*Lmd*Lmq*Pp*X+4*pow(3,0.5)*L.f[2]*Llf*Lls*Lmd*Pp*X+2*pow(3,0.5)*L.f[1]*Lls*Lmd*Lmq*Pp*X+4*pow(3,0.5)*L.f[2]*Llf*Lls*Lmq*Pp*X+4*pow(3,0.5)*L.f[2]*Llf*Lmd*Lmq*Pp*X+4*pow(3,0.5)*L.f[2]*Lls*Lmd*Lmq*Pp*X+2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmd*X*cos(2*theta)-2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmq*X*cos(2*theta)+4*pow(3,0.5)*L.f[2]*Llf*Lls*Lmd*X*cos(2*theta)-2*pow(3,0.5)*L.f[1]*Lls*Lmd*Lmq*X*cos(2*theta)-4*pow(3,0.5)*L.f[2]*Llf*Lls*Lmq*X*cos(2*theta)-4*pow(3,0.5)*L.f[2]*Lls*Lmd*Lmq*X*cos(2*theta))/(6*(Lls+Lmq)*(Llf*Lls+Llf*Lmd+Lls*Lmd))</equ>
        <equ>d.L.f[2]=-(2*Llf*Lls*p.3+Llf*Lmd*p.3+Llf*Lmq*p.3+2*Lls*Lmd*p.3-4*Llf*Lls*p.4-2*Llf*Lmd*p.4+Lmd*Lmq*p.3-2*Llf*Lmq*p.4-4*Lls*Lmd*p.4+2*Llf*Lls*p.5+Llf*Lmd*p.5-2*Lmd*Lmq*p.4+Llf*Lmq*p.5+2*Lls*Lmd*p.5+Lmd*Lmq*p.5+6*L.f[2]*Llf*Lls*Rs+3*L.f[2]*Llf*Lmd*Rs+3*L.f[2]*Llf*Lmq*Rs+6*L.f[2]*Lls*Lmd*Rs+3*L.f[2]*Lmd*Lmq*Rs-Llf*Lmd*p.3*cos(2*theta)+Llf*Lmq*p.3*cos(2*theta)-Llf*Lmd*p.4*cos(2*theta)+Lmd*Lmq*p.3*cos(2*theta)+Llf*Lmq*p.4*cos(2*theta)+2*Llf*Lmd*p.5*cos(2*theta)+Lmd*Lmq*p.4*cos(2*theta)-2*Llf*Lmq*p.5*cos(2*theta)-2*Lmd*Lmq*p.5*cos(2*theta)-3*Lls*Lmd*p.1*cos(theta)+3*Lls*Lmd*p.2*cos(theta)-3*Lmd*Lmq*p.1*cos(theta)+3*Lmd*Lmq*p.2*cos(theta)+pow(3,0.5)*Llf*Lmd*p.3*sin(2*theta)-pow(3,0.5)*Llf*Lmq*p.3*sin(2*theta)-pow(3,0.5)*Llf*Lmd*p.4*sin(2*theta)-pow(3,0.5)*Lmd*Lmq*p.3*sin(2*theta)+pow(3,0.5)*Llf*Lmq*p.4*sin(2*theta)+pow(3,0.5)*Lmd*Lmq*p.4*sin(2*theta)+3*pow(3,0.5)*Lls*Lmd*p.1*sin(theta)-3*pow(3,0.5)*Lls*Lmd*p.2*sin(theta)+3*pow(3,0.5)*Lmd*Lmq*p.1*sin(theta)-3*pow(3,0.5)*Lmd*Lmq*p.2*sin(theta)+4*pow(3,0.5)*L.f[1]*Llf*Lls^2*X+2*pow(3,0.5)*L.f[1]*Llf*Lmd^2*X+2*pow(3,0.5)*L.f[1]*Llf*Lmq^2*X+2*pow(3,0.5)*L.f[1]*Lls*Lmd^2*X+4*pow(3,0.5)*L.f[1]*Lls^2*Lmd*X+2*pow(3,0.5)*L.f[2]*Llf*Lls^2*X+pow(3,0.5)*L.f[2]*Llf*Lmd^2*X+2*pow(3,0.5)*L.f[1]*Lmd*Lmq^2*X+pow(3,0.5)*L.f[2]*Llf*Lmq^2*X+pow(3,0.5)*L.f[2]*Lls*Lmd^2*X+2*pow(3,0.5)*L.f[2]*Lls^2*Lmd*X+pow(3,0.5)*L.f[2]*Lmd*Lmq^2*X+3*L.f[1]*Llf*Lmd^2*X*sin(2*theta)-3*L.f[1]*Llf*Lmq^2*X*sin(2*theta)+3*L.f[1]*Lls*Lmd^2*X*sin(2*theta)+3*L.f[2]*Llf*Lmd^2*X*sin(2*theta)-3*L.f[1]*Lmd*Lmq^2*X*sin(2*theta)-3*L.f[2]*Llf*Lmq^2*X*sin(2*theta)+3*L.f[2]*Lls*Lmd^2*X*sin(2*theta)-3*L.f[2]*Lmd*Lmq^2*X*sin(2*theta)+3*fd1.f*Llf*Lmd^2*X*sin(theta)+3*fd1.f*Lls*Lmd^2*X*sin(theta)+3*fd1.f*Lls*Lmd*Rf*cos(theta)+3*fd1.f*Lmd*Lmq*Rf*cos(theta)+3*L.f[1]*Llf*Lmd*Rs*cos(2*theta)-3*L.f[1]*Llf*Lmq*Rs*cos(2*theta)+3*L.f[2]*Llf*Lmd*Rs*cos(2*theta)-3*L.f[1]*Lmd*Lmq*Rs*cos(2*theta)-3*L.f[2]*Llf*Lmq*Rs*cos(2*theta)-3*L.f[2]*Lmd*Lmq*Rs*cos(2*theta)+4*pow(3,0.5)*L.f[1]*Llf*Lls*Lmd*X+4*pow(3,0.5)*L.f[1]*Llf*Lls*Lmq*X+2*pow(3,0.5)*L.f[2]*Llf*Lls*Lmd*X+4*pow(3,0.5)*L.f[1]*Lls*Lmd*Lmq*X+2*pow(3,0.5)*L.f[2]*Llf*Lls*Lmq*X+2*pow(3,0.5)*L.f[2]*Lls*Lmd*Lmq*X-3*pow(3,0.5)*fd1.f*Lls*Lmd*Rf*sin(theta)-3*pow(3,0.5)*fd1.f*Lmd*Lmq*Rf*sin(theta)-pow(3,0.5)*L.f[1]*Llf*Lmd*Rs*sin(2*theta)+pow(3,0.5)*L.f[1]*Llf*Lmq*Rs*sin(2*theta)+pow(3,0.5)*L.f[2]*Llf*Lmd*Rs*sin(2*theta)+pow(3,0.5)*L.f[1]*Lmd*Lmq*Rs*sin(2*theta)-pow(3,0.5)*L.f[2]*Llf*Lmq*Rs*sin(2*theta)-pow(3,0.5)*L.f[2]*Lmd*Lmq*Rs*sin(2*theta)+6*L.f[1]*Llf*Lls*Lmd*X*sin(2*theta)-6*L.f[1]*Llf*Lls*Lmq*X*sin(2*theta)+6*L.f[2]*Llf*Lls*Lmd*X*sin(2*theta)-6*L.f[1]*Lls*Lmd*Lmq*X*sin(2*theta)-6*L.f[2]*Llf*Lls*Lmq*X*sin(2*theta)-6*L.f[2]*Lls*Lmd*Lmq*X*sin(2*theta)+3*fd1.f*Llf*Lls*Lmd*X*sin(theta)-4*pow(3,0.5)*L.f[1]*Llf*Lls^2*Pp*X-4*pow(3,0.5)*L.f[1]*Lls^2*Lmd*Pp*X-2*pow(3,0.5)*L.f[2]*Llf*Lls^2*Pp*X-2*pow(3,0.5)*L.f[2]*Lls^2*Lmd*Pp*X+pow(3,0.5)*L.f[1]*Llf*Lmd^2*X*cos(2*theta)-pow(3,0.5)*L.f[1]*Llf*Lmq^2*X*cos(2*theta)+pow(3,0.5)*L.f[1]*Lls*Lmd^2*X*cos(2*theta)-pow(3,0.5)*L.f[2]*Llf*Lmd^2*X*cos(2*theta)-pow(3,0.5)*L.f[1]*Lmd*Lmq^2*X*cos(2*theta)+pow(3,0.5)*L.f[2]*Llf*Lmq^2*X*cos(2*theta)-pow(3,0.5)*L.f[2]*Lls*Lmd^2*X*cos(2*theta)+pow(3,0.5)*L.f[2]*Lmd*Lmq^2*X*cos(2*theta)+3*pow(3,0.5)*fd1.f*Llf*Lmd^2*X*cos(theta)+3*pow(3,0.5)*fd1.f*Lls*Lmd^2*X*cos(theta)-4*pow(3,0.5)*L.f[1]*Llf*Lls*Lmd*Pp*X-4*pow(3,0.5)*L.f[1]*Llf*Lls*Lmq*Pp*X-4*pow(3,0.5)*L.f[1]*Llf*Lmd*Lmq*Pp*X-2*pow(3,0.5)*L.f[2]*Llf*Lls*Lmd*Pp*X-4*pow(3,0.5)*L.f[1]*Lls*Lmd*Lmq*Pp*X-2*pow(3,0.5)*L.f[2]*Llf*Lls*Lmq*Pp*X-2*pow(3,0.5)*L.f[2]*Llf*Lmd*Lmq*Pp*X-2*pow(3,0.5)*L.f[2]*Lls*Lmd*Lmq*Pp*X+2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmd*X*cos(2*theta)-2*pow(3,0.5)*L.f[1]*Llf*Lls*Lmq*X*cos(2*theta)-2*pow(3,0.5)*L.f[2]*Llf*Lls*Lmd*X*cos(2*theta)-2*pow(3,0.5)*L.f[1]*Lls*Lmd*Lmq*X*cos(2*theta)+2*pow(3,0.5)*L.f[2]*Llf*Lls*Lmq*X*cos(2*theta)+2*pow(3,0.5)*L.f[2]*Lls*Lmd*Lmq*X*cos(2*theta)+3*pow(3,0.5)*fd1.f*Llf*Lls*Lmd*X*cos(theta))/(6*(Lls+Lmq)*(Llf*Lls+Llf*Lmd+Lls*Lmd))</equ>
        <equ>d.fd1.f=(3*Lls*p.1-3*Lls*p.2+3*Lmd*p.1-3*Lmd*p.2-3*fd1.f*Lls*Rf-3*fd1.f*Lmd*Rf-2*Lmd*p.3*cos(theta)+Lmd*p.4*cos(theta)+Lmd*p.5*cos(theta)+3*L.f[1]*Lmd*Rs*cos(theta)-pow(3,0.5)*Lmd*p.4*sin(theta)+pow(3,0.5)*Lmd*p.5*sin(theta)+pow(3,0.5)*L.f[1]*Lmd*Rs*sin(theta)+2*pow(3,0.5)*L.f[2]*Lmd*Rs*sin(theta)+3*L.f[1]*Lls*Lmd*X*sin(theta)+3*L.f[1]*Lmd*Lmq*X*sin(theta)-pow(3,0.5)*L.f[1]*Lls*Lmd*X*cos(theta)-pow(3,0.5)*L.f[1]*Lmd*Lmq*X*cos(theta)-2*pow(3,0.5)*L.f[2]*Lls*Lmd*X*cos(theta)-2*pow(3,0.5)*L.f[2]*Lmd*Lmq*X*cos(theta))/(3*(Llf*Lls+Llf*Lmd+Lls*Lmd))</equ>
        <equ>d.X = (M - r1.f - F*X)/J</equ>
        <equ>d.theta = Pp*X</equ>
    </Equations>
</elem>
